# 通用目标检测系统 - Universal Object Detection System

基于YOLO的通用目标检测系统，提供图形化界面，支持多种检测模式和高级功能。

## 📋 功能特性

### 🎯 核心功能
- **多模式检测**：支持单张图片、视频文件、摄像头实时检测、文件夹批量检测
- **动态模型加载**：支持运行时切换不同的YOLO模型权重
- **置信度调整**：实时调整检测置信度阈值（0.01-1.0）
- **批量处理**：支持文件夹遍历，批量处理大量图片

### 🎨 界面特性
- **双显示窗口**：同时显示原图和检测结果
- **标签页设计**：实时检测和批量结果分离显示
- **进度跟踪**：实时显示检测进度和状态
- **结果导航**：批量检测结果支持前后翻页浏览

### 💾 数据管理
- **结果保存**：批量检测结果可保存为图片和详细报告
- **日志记录**：完整的检测过程日志，支持清除和滚动
- **文件预览**：选择文件后立即预览，提升用户体验

## 🚀 快速开始

### 环境要求
```bash
Python 3.8+
PySide6
OpenCV (cv2)
ultralytics (YOLO)
numpy
```

### 安装依赖
```bash
pip install PySide6 opencv-python ultralytics numpy
```

### 模型准备
1. 在项目根目录创建 `pt_models` 文件夹
2. 将您的YOLO模型文件（.pt格式）放入该文件夹
3. 支持的模型格式：YOLOv8/YOLOv11等ultralytics兼容模型

### 运行程序
```bash
python universal_object_detection.py
```

## 📁 项目结构
```
universal_object_detection/
├── universal_object_detection.py  # 主程序文件
├── pt_models/                     # 模型权重文件夹
│   ├── yolov8n.pt                # 示例：YOLO模型文件
│   ├── yolov8s.pt                # 示例：YOLO模型文件
│   └── custom_model.pt           # 示例：自定义模型文件
└── README.md                     # 项目说明文档
```

## 🎮 使用指南

### 1. 模型配置
- **选择模型**：从下拉列表中选择要使用的YOLO模型
- **刷新模型**：点击🔄按钮重新扫描模型文件夹
- **置信度设置**：使用滑块或数值框调整检测置信度阈值

### 2. 检测模式

#### 📸 单张图片检测
1. 选择"单张图片"模式
2. 点击"选择文件"按钮选择图片
3. 点击"▶ 开始检测"进行检测

#### 🎬 视频文件检测
1. 选择"视频文件"模式
2. 选择视频文件（支持mp4、avi、mov等格式）
3. 开始检测，可暂停/继续/停止

#### 📹 摄像头实时检测
1. 选择"摄像头"模式
2. 直接点击"▶ 开始检测"开始实时检测
3. 支持暂停和停止功能

#### 📁 文件夹批量检测
1. 选择"文件夹批量"模式
2. 选择包含图片的文件夹
3. 开始批量检测，自动处理所有支持格式的图片
4. 在"批量结果"标签页查看和导航结果

### 3. 结果管理
- **结果浏览**：使用前后导航按钮浏览批量检测结果
- **保存结果**：将批量检测结果保存为图片和报告文件
- **清除结果**：清空当前批量检测结果

### 4. 日志监控
- **实时日志**：查看检测过程的详细信息
- **日志管理**：支持清除日志，自动限制日志行数

## 🔧 技术细节

### 支持的图片格式
- JPG/JPEG
- PNG
- BMP
- TIFF
- WebP

### 支持的视频格式
- MP4
- AVI
- MOV
- MKV
- WMV
- FLV

### 性能优化
- **多线程处理**：检测过程在后台线程运行，不阻塞UI
- **内存管理**：自动限制日志缓存，避免内存泄漏
- **帧率控制**：视频和摄像头检测支持帧率控制

## 🎨 界面说明

### 左侧控制面板
1. **模型配置区**：模型选择和置信度设置
2. **检测源配置区**：检测模式选择和文件选择
3. **检测控制区**：开始/暂停/停止按钮和进度条
4. **运行日志区**：实时显示检测日志信息

### 右侧显示区域
1. **实时检测标签页**：显示原图和检测结果
2. **批量结果标签页**：批量检测结果浏览和管理

## 🔍 故障排除

### 常见问题
1. **模型加载失败**
   - 检查模型文件是否存在于 `pt_models` 文件夹
   - 确保模型文件格式正确（.pt格式）
   - 检查ultralytics库是否正确安装

2. **摄像头无法打开**
   - 确保摄像头设备可用且未被其他程序占用
   - 检查摄像头权限设置

3. **检测速度慢**
   - 降低置信度阈值可能提高检测速度
   - 使用更小的模型（如YOLOv8n而不是YOLOv8x）
   - 确保GPU驱动和CUDA环境配置正确

### 日志信息
程序会记录详细的运行日志，包括：
- 模型加载状态
- 文件选择和处理信息
- 检测结果统计
- 错误和警告信息

## 📄 许可证

本项目基于MIT许可证开源。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 📧 联系方式

如有问题或建议，请通过Issue联系我们。
