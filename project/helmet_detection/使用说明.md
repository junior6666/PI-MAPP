# 头盔检测系统使用说明

## 系统概述

这是一个基于YOLO模型的头盔检测系统，提供图形化界面，支持图片、视频和摄像头实时检测。

## 功能特性

- **多源检测**: 支持图片、视频文件和摄像头实时检测
- **实时显示**: 左右分屏显示原图和检测结果
- **详细日志**: 显示推理耗时、置信度、检测框坐标等信息
- **控制功能**: 开始、暂停、停止检测
- **进度显示**: 视频检测时显示进度条

## 安装步骤

### 1. 环境要求
- Python 3.8 或更高版本
- Windows 10/11 操作系统

### 2. 快速安装
双击运行 `install.bat` 文件，脚本会自动：
- 检查Python环境
- 升级pip
- 安装所有依赖包

### 3. 手动安装
如果自动安装失败，可以手动执行：
```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 启动程序
双击运行 `run.bat` 文件，或直接执行：
```bash
python main.py
```

### 2. 界面说明

#### 图像显示区域
- **左侧**: 显示原始图像/视频帧
- **右侧**: 显示检测结果（带检测框）

#### 控制面板
- **选择源**: 下拉菜单选择检测源类型
  - 图片：处理单张图片
  - 视频：处理视频文件
  - 摄像头：实时摄像头检测
- **选择文件**: 当选择图片或视频时，点击选择具体文件
- **开始检测**: 开始执行检测
- **暂停检测**: 暂停当前检测（可恢复）
- **停止检测**: 停止检测并恢复初始状态

#### 检测进度
- 显示视频检测的进度百分比

#### 检测日志
- 显示详细的检测信息
- 包括推理耗时、检测目标数量、置信度、坐标等

### 3. 操作流程

#### 图片检测
1. 选择源：选择"图片"
2. 选择文件：点击"选择文件"按钮，选择要检测的图片
3. 开始检测：点击"开始检测"按钮
4. 查看结果：在右侧查看检测结果，在日志区域查看详细信息

#### 视频检测
1. 选择源：选择"视频"
2. 选择文件：点击"选择文件"按钮，选择要检测的视频
3. 开始检测：点击"开始检测"按钮
4. 控制播放：可以使用暂停/继续按钮控制播放
5. 查看进度：进度条显示检测进度

#### 摄像头检测
1. 选择源：选择"摄像头"
2. 开始检测：点击"开始检测"按钮
3. 实时检测：系统会实时显示摄像头画面和检测结果
4. 控制检测：可以使用暂停/继续按钮控制检测

## 检测结果说明

### 坐标格式
- **xyxy**: 绝对坐标 (top-left-x, top-left-y, bottom-right-x, bottom-right-y)
- **xyxyn**: 归一化坐标 (0-1范围)

### 置信度
- 范围：0-1
- 数值越高表示检测结果越可靠

## 故障排除

### 常见问题

1. **模型文件不存在**
   - 确保 `pt_models/helmet_best.pt` 文件存在
   - 检查文件路径是否正确

2. **依赖安装失败**
   - 确保Python版本为3.8+
   - 尝试手动安装：`pip install ultralytics opencv-python PySide6`

3. **摄像头无法打开**
   - 检查摄像头是否被其他程序占用
   - 确保摄像头驱动正常

4. **检测速度慢**
   - 检查是否有GPU支持
   - 可以调整视频帧率或降低图像分辨率

### 性能优化建议

1. **GPU加速**: 如果有NVIDIA GPU，安装CUDA版本的PyTorch
2. **模型优化**: 可以使用更小的模型文件提高速度
3. **图像预处理**: 适当降低输入图像分辨率

## 技术架构

- **前端**: PySide6 (Qt for Python)
- **后端**: Ultralytics YOLO
- **图像处理**: OpenCV
- **深度学习**: PyTorch

## 文件结构

```
helmet_detection/
├── main.py              # 主程序文件
├── requirements.txt     # 依赖包列表
├── install.bat         # 安装脚本
├── run.bat            # 运行脚本
├── README.md          # 项目说明
├── 使用说明.md        # 本文件
├── pt_models/         # 模型文件目录
│   └── helmet_best.pt # 训练好的模型
├── helmet_test_img/   # 测试图片目录
└── runs/              # 检测结果输出目录
```

## 更新日志

- v1.0.0: 初始版本，支持基本的头盔检测功能
- 支持图片、视频、摄像头三种检测模式
- 提供完整的图形化界面
- 实时显示检测结果和详细信息 